nc: 1

depth_multiple: 0.33
width_multiple: 0.25

backbone:
  # 입력 → P2
  - [-1, 1, Conv,      [64, 3, 2]]      # 0-P1/2
  - [-1, 1, Conv,      [128, 3, 2]]     # 1-P2/4

  # P2 stage
  - [-1, 2, C3Ghost,   [128]]           # 2
  - [-1, 1, DWConv,    [128, 3, 1]]     # 3

  # P3 stage
  - [-1, 1, Conv,      [256, 3, 2]]     # 4-P3/8
  - [-1, 3, C3Ghost,   [256]]           # 5
  - [-1, 1, DWConv,    [256, 3, 1]]     # 6   ← P3 (1/8)

  # P4 stage
  - [-1, 1, Conv,      [512, 3, 2]]     # 7-P4/16
  - [-1, 3, C3Ghost,   [512]]           # 8
  - [-1, 1, DWConv,    [512, 3, 1]]     # 9   ← P4 (1/16)

  # P5 stage
  - [-1, 1, Conv,      [768, 3, 2]]     # 10-P5/32
  - [-1, 2, C3Ghost,   [768]]           # 11
  - [-1, 1, DWConv,    [768, 3, 1]]     # 12
  - [-1, 1, SPPF,      [768, 5]]        # 13  ← P5 (1/32)

head:
  # ---------- P5 → P4 (FPN 상향 경로) ----------
  - [13, 1, nn.Upsample, [None, 2, "nearest"]]   # 14: P5 upsample → 1/16
  - [[14, 9], 1, Concat, [1]]                    # 15: P5_up + P4(9)
  - [15, 1, C2f, [512]]                          # 16: P4 head
  - [16, 1, CBAMLite, []]                        # 17: P4 CBAMLite

  # ---------- P4 → P3 ----------
  - [17, 1, nn.Upsample, [None, 2, "nearest"]]   # 18: P4_up → 1/8
  - [[18, 6], 1, Concat, [1]]                    # 19: P4_up + P3(6)
  - [19, 1, C2f, [256]]                          # 20: P3 head
  - [20, 1, CBAMLite, []]                        # 21: P3 CBAMLite

  # ---------- P3 → P4 (PAN 하향 경로) ----------
  - [21, 1, Conv, [256, 3, 2]]                   # 22: P3 down → 1/16
  - [[22, 17], 1, Concat, [1]]                   # 23: P3_down + P4_CBAM(17)
  - [23, 1, C2f, [512]]                          # 24: P4 PAN
  - [24, 1, CBAMLite, []]                        # 25: P4 PAN CBAMLite

  # ---------- P4 → P5 ----------
  - [25, 1, Conv, [512, 3, 2]]                   # 26: P4 down → 1/32
  - [[26, 13], 1, Concat, [1]]                   # 27: P4_down + P5 backbone(13)
  - [27, 1, C2f, [768]]                          # 28: P5 PAN
  - [28, 1, CBAMLite, []]                        # 29: P5 PAN CBAMLite

  # ---------- Detect (3-scale) ----------
  - [[21, 25, 29], 1, Detect, [nc]]              # 30: P3, P4, P5
